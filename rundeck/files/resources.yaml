{%- from "rundeck/map.jinja" import client with context %}

{%- for node in client.project.get(project_name, {}).get("node", {}).values() %}

{{ node.nodename }}:
  hostname: {{ node.hostname }}
  nodename: {{ node.nodename }}
  username: {{ node.username }}
  tags: {{ node.get("tags", [])|yaml }}

{%- endfor %}
resources.source.1.config.args=-s *
resources.source.1.config.file=/opt/rundeck/scripts/salt-gen-resource/SaltGenResource.py
resources.source.1.config.format=resourceyaml
resources.source.1.config.interpreter=sudo
resources.source.1.type=script
